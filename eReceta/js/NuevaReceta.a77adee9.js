(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["NuevaReceta"],{"1bcc":function(t,e,n){},2532:function(t,e,n){"use strict";var i=n("23e7"),r=n("5a34"),a=n("1d80"),s=n("ab13");i({target:"String",proto:!0,forced:!s("includes")},{includes:function(t){return!!~String(a(this)).indexOf(r(t),arguments.length>1?arguments[1]:void 0)}})},"2ca0":function(t,e,n){"use strict";var i=n("23e7"),r=n("06cf").f,a=n("50c4"),s=n("5a34"),o=n("1d80"),c=n("ab13"),l=n("c430"),d="".startsWith,u=Math.min,f=c("startsWith"),m=!l&&!f&&!!function(){var t=r(String.prototype,"startsWith");return t&&!t.writable}();i({target:"String",proto:!0,forced:!m&&!f},{startsWith:function(t){var e=String(o(this));s(t);var n=a(u(arguments.length>1?arguments[1]:void 0,e.length)),i=String(t);return d?d.call(e,i,n):e.slice(n,n+i.length)===i}})},"44e7":function(t,e,n){var i=n("861d"),r=n("c6b6"),a=n("b622"),s=a("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==r(t))}},"5a34":function(t,e,n){var i=n("44e7");t.exports=function(t){if(i(t))throw TypeError("The method doesn't accept regular expressions");return t}},"5d13":function(t,e,n){"use strict";var i=n("1bcc"),r=n.n(i);r.a},"60f9":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"h-100 row pt-2 justify-content-center"},[n("div",{staticClass:"col-12 col-md-6 text-left"},[n("span",{staticClass:"text-muted"},[t._v("Datos del paciente")]),n("form",{staticClass:"border border-dark p-2",attrs:{action:"",method:"POST"},on:{submit:function(e){return t.validate()}}},[n("div",{staticClass:"form-group row"},[n("div",{staticClass:"col-6 col-md-12 pr-1 pr-md-3 mb-md-3 text-left"},[n("label",{attrs:{for:""}},[t._v("Nombre")]),n("form-input",{attrs:{model:t.paciente,error:t.error.nombre,type:"text",name:"nombre",placeholder:"Ingrese nombre"}})],1),n("div",{staticClass:"col-6 col-md-12 pl-1 pl-md-3 text-left"},[n("label",{attrs:{for:""}},[t._v("Apellido")]),n("form-input",{attrs:{model:t.paciente,error:t.error.apellido,type:"text",name:"apellido",placeholder:"Ingrese apellido"}})],1)]),n("div",{staticClass:"form-group text-left"},[n("label",{attrs:{for:""}},[t._v("DNI")]),n("form-input",{attrs:{model:t.paciente,error:t.error.dni,type:"number",name:"dni",placeholder:"Ingrese DNI"}})],1)])]),n("div",{staticClass:"col-12 col-md-6 mt-2 text-center",on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.validate()}}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 my-3 my-md-0"},[n("div",{staticClass:"position-relative"},[n("input",{staticClass:"form-control pl-4",attrs:{type:"text",placeholder:"¿Qué medicamento esta buscando?"},domProps:{value:t.query},on:{input:function(e){t.query=e.target.value}}}),n("font-awesome-icon",{staticClass:"position-absolute text-muted",staticStyle:{left:"7px",top:"11px"},attrs:{icon:"search"}})],1),n("ul",{staticClass:"list-unstyled bg-light"},t._l(t.listaMedicamento,(function(e){return n("li",{key:e.id,staticClass:"p-2 text-left border-bottom d-flex justify-content-between align-items-center",staticStyle:{cursor:"pointer"},on:{click:function(n){return t.addSeleccionado(e)}}},[n("span",[t._v(t._s(e.nombre))]),t._m(0,!0)])})),0)]),n("div",{staticClass:"col-12 m-auto"},[n("h2",{staticClass:"text-muted h6"},[t._v("Medicamentos seleccionados ("+t._s(t.seleccionados.length)+")")]),n("table",{staticClass:"table mb-0 text-muted table-bordered"},[t._m(1),n("tbody",{staticClass:"text-left"},[t._l(t.seleccionados,(function(e,i){return[n("tr",{key:i},[n("td",{staticClass:"px-1"},[n("div",{staticClass:"bg-danger p-1 rounded pointer",staticStyle:{"line-height":"0.5"},on:{click:function(n){return t.sacarSeleccionado(e)}}},[n("font-awesome-icon",{staticClass:"text-white",attrs:{icon:"trash-alt",title:"Eliminar"}})],1)]),n("td",{staticClass:"small",attrs:{scope:"row"}},[t._v(t._s(e.nombre))]),n("td",[n("div",{staticClass:"d-flex justify-content-between"},[n("div",{staticClass:"bg-purpura p-1 rounded pointer d-flex align-items-center",staticStyle:{"line-height":"0.5"},on:{click:function(t){1!=e.cantidad&&e.cantidad--}}},[n("font-awesome-icon",{staticClass:"small text-white",attrs:{icon:"minus",title:"Restar"}})],1),n("div",[t._v(" "+t._s(e.cantidad)+" ")]),n("div",{staticClass:"bg-purpura p-1 rounded pointer d-flex align-items-center",staticStyle:{"line-height":"0.5"},on:{click:function(t){e.cantidad++}}},[n("font-awesome-icon",{staticClass:"small text-white",attrs:{icon:"plus",title:"Sumar"}})],1)])])])]}))],2)])]),n("div",{staticClass:"col-12 my-2 d-flex flex-column align-items-center"},[t.error.message&&(!t.seleccionados.length||!t.seleccionadosNoEsCero)||t.errorStatus?n("span",{staticClass:"text-danger small"},[t._v(t._s(t.error.message))]):t._e(),n("div",{staticClass:"form-group mt-2"},[n("b-button",{attrs:{variant:"primary"},on:{click:function(e){return t.validate()}}},[t._v(" Siguiente "),n("b-spinner",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],attrs:{small:""}})],1)],1)])])])])},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"text-muted small "},[n("u",[t._v("Seleccionar")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",{staticClass:"h6 text-left"},[n("th"),n("th",{staticStyle:{width:"80%"}},[t._v("Nombre")]),n("th",{staticStyle:{width:"20%"}},[t._v("Cantidad")])])])}],a=(n("4de4"),n("7db0"),n("c740"),n("4160"),n("caad"),n("fb6a"),n("a434"),n("b64b"),n("d3b7"),n("2532"),n("2ca0"),n("159b"),n("5530")),s=n("2f62"),o={data:function(){return{paciente:{nombre:"",apellido:"",dni:""},error:{},medicamentos:JSON.parse(localStorage.getItem("medicamentos")),seleccionados:[],query:"",loading:!1,errorStatus:!1}},computed:{listaMedicamento:function(){var t=this;if(this.query.length){var e=this.medicamentos.filter((function(e){return e.nombre.startsWith(t.query.toUpperCase())})).slice(0,5);return e=e.length?e:this.medicamentos.filter((function(e){return e.nombre.includes(t.query.toUpperCase())})).slice(0,5),e=e.length?e:this.medicamentos.filter((function(e){return void 0!=e.formula&&e.formula.includes(t.query.toUpperCase())})).slice(0,5),e}},seleccionadosNoEsCero:function(){return this.seleccionados.find((function(t){return t.cantidad>0}))}},methods:Object(a["a"])({},Object(s["b"])(["updateDataPDF"]),{validate:function(){var t=this;this.error={},this.errorStatus=!1,!this.paciente.dni.length||this.paciente.dni.length>=7&&this.paciente.dni.length<=8||(this.error.dni="El DNI debe tener entre 7 y 8 digitos"),this.seleccionadosNoEsCero||(this.error.message="La cantidad no puede ser 0"),this.seleccionados.length||(this.error.message="¡Debe seleccionar al menos un medicamento!"),Object.keys(this.paciente).forEach((function(e){t.paciente[e]||"dni"==e||t.$set(t.error,e,"¡El campo no debe estar vacio!")})),Object.keys(this.error).length||this.enviar()},addSeleccionado:function(t){this.query="",t.cantidad=1,this.seleccionados.push(t);var e=this.medicamentos.findIndex((function(e){return e.nombre==t.nombre}));this.medicamentos.splice(e,1)},sacarSeleccionado:function(t){var e=this.seleccionados.findIndex((function(e){return e.nombre==t.nombre}));this.medicamentos.push(this.seleccionados.splice(e,1)[0])},enviar:function(){var t=this;this.loading=!0,this.errorStatus=!1;var e={usuarioMedicoDto:this.$store.state.auth,pacienteDto:this.paciente,medicamentoDtos:this.seleccionados};axios.post("http://"+properties.ip+"/erp-web/view/recetaCupon/nuevoCupon",e).then((function(e){t.updateDataPDF(e.data),t.$router.push("/receta")})).catch((function(e){t.errorStatus=!0,t.error.message="No se pudo continuar con el proceso: "+e.message})).finally((function(e){return t.loading=!1}))}}),mounted:function(){var t=this;axios.post("http://"+properties.ip+"/erp-web/view/recetaCupon/medicamentos",{nombre:"",descuento:"",cantidad:""}).then((function(e){console.log(e),t.medicamentos=e.data})).catch((function(e){t.errorStatus=!0,t.error.message="No se pudo cargar la lista de medicamentos: "+e.message})),document.querySelector("table").addEventListener("mousedown",(function(t){t.preventDefault()}))}},c=o,l=(n("5d13"),n("2877")),d=Object(l["a"])(c,i,r,!1,null,null,null);e["default"]=d.exports},"7db0":function(t,e,n){"use strict";var i=n("23e7"),r=n("b727").find,a=n("44d2"),s=n("ae40"),o="find",c=!0,l=s(o);o in[]&&Array(1)[o]((function(){c=!1})),i({target:"Array",proto:!0,forced:c||!l},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),a(o)},a434:function(t,e,n){"use strict";var i=n("23e7"),r=n("23cb"),a=n("a691"),s=n("50c4"),o=n("7b0b"),c=n("65f0"),l=n("8418"),d=n("1dde"),u=n("ae40"),f=d("splice"),m=u("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,h=Math.min,v=9007199254740991,b="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!f||!m},{splice:function(t,e){var n,i,d,u,f,m,g=o(this),y=s(g.length),C=r(t,y),x=arguments.length;if(0===x?n=i=0:1===x?(n=0,i=y-C):(n=x-2,i=h(p(a(e),0),y-C)),y+n-i>v)throw TypeError(b);for(d=c(g,i),u=0;u<i;u++)f=C+u,f in g&&l(d,u,g[f]);if(d.length=i,n<i){for(u=C;u<y-i;u++)f=u+i,m=u+n,f in g?g[m]=g[f]:delete g[m];for(u=y;u>y-i+n;u--)delete g[u-1]}else if(n>i)for(u=y-i;u>C;u--)f=u+i-1,m=u+n-1,f in g?g[m]=g[f]:delete g[m];for(u=0;u<n;u++)g[u+C]=arguments[u+2];return g.length=y-i+n,d}})},ab13:function(t,e,n){var i=n("b622"),r=i("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,"/./"[t](e)}catch(i){}}return!1}},c740:function(t,e,n){"use strict";var i=n("23e7"),r=n("b727").findIndex,a=n("44d2"),s=n("ae40"),o="findIndex",c=!0,l=s(o);o in[]&&Array(1)[o]((function(){c=!1})),i({target:"Array",proto:!0,forced:c||!l},{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),a(o)},caad:function(t,e,n){"use strict";var i=n("23e7"),r=n("4d64").includes,a=n("44d2"),s=n("ae40"),o=s("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:!o},{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),a("includes")},fb6a:function(t,e,n){"use strict";var i=n("23e7"),r=n("861d"),a=n("e8b5"),s=n("23cb"),o=n("50c4"),c=n("fc6a"),l=n("8418"),d=n("b622"),u=n("1dde"),f=n("ae40"),m=u("slice"),p=f("slice",{ACCESSORS:!0,0:0,1:2}),h=d("species"),v=[].slice,b=Math.max;i({target:"Array",proto:!0,forced:!m||!p},{slice:function(t,e){var n,i,d,u=c(this),f=o(u.length),m=s(t,f),p=s(void 0===e?f:e,f);if(a(u)&&(n=u.constructor,"function"!=typeof n||n!==Array&&!a(n.prototype)?r(n)&&(n=n[h],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return v.call(u,m,p);for(i=new(void 0===n?Array:n)(b(p-m,0)),d=0;m<p;m++,d++)m in u&&l(i,d,u[m]);return i.length=d,i}})}}]);
//# sourceMappingURL=NuevaReceta.a77adee9.js.map